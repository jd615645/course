$(document).ready(function(){$("#saveAsJson").click(function(){window.user.user_name=$("#user_name").val(),window.user.user_dept=$("#user_dept").val();var e=$("#user_name").val(),o=JSON.stringify(window.user),r=new Blob([o],{type:"application/json"});saveAs(r,e+".json")}),$("#post_for_course").click(function(){window.user.user_name=$("#user_name").val(),window.user.user_dept=$("#user_dept").val();var e=$.extend({},window.user);e.csrfmiddlewaretoken=getCookie("csrftoken"),e.time_table=JSON.stringify(window.user.time_table),e.idList=JSON.stringify(window.user.idList),e.returnarr=JSON.stringify(window.user.returnarr),descide_post(e.time_table)?$.post(".",e).done(function(){toastr.success("恭喜您成功上傳課表囉~"),redirect_loc="/course/course_zh_TW/?name="+e.user_name,document.location.href=redirect_loc}).fail(function(){toastr.error("抱歉，上傳錯誤，請重新再試")}).always(function(){console.log("finished")}):toastr.warning("您還沒有填入任何課程喔！")}),$("#book_of_course").click(function(){var e={};e.csrfmiddlewaretoken=getCookie("csrftoken"),e.courseID=$("#courseID").val(),id=e.courseID,e.name=window.courses[id][0].title_parsed.zh_TW,e.book=$("#book").val(),descide_post(e.courseID)&&descide_post(e.book)?$.post("/course/book_of_course/",e).done(function(){toastr.success("感謝您告訴我們這門課的書籍喔~"),window.already_post=!0,document.location.reload()}).fail(function(){toastr.error("抱歉，上傳錯誤，請重新再試")}).always(function(){console.log("finished")}):toastr.warning("您還沒有填入任何資料喔！")})});var load_timetable=function(e){$.each(e,function(e,o){add_course($("#time-table"),o,language)})},load_json_for_user=function(e,o){var r="/static/coursepickinghelper/json/"+e+".json";0==haveloadin[e]&&(haveloadin[e]=!0),get_json_when_change_degree(r,o)},descide_post=function(e){return"[]"==e||""==e?!1:!0},redirect_for_booklist=function(){redirect_loc="/course/course_zh_TW/?name="+$("#user_name").val(),document.location.href=redirect_loc};